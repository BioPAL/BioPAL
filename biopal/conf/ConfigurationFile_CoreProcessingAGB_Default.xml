<ConfigurationL2CoreProcessingAGB version="1.0">
	<EstimateAGB>
		<residual_function>
			<formula_terms>
				<term><!--  these terms are for absolute calibration with low-res GEDI data -->
					<string>l_hh + a_hh * agb_1_cal_1km_db + n_hh * cos_local_db + neg_sigma0_hh_db</string>
					<weight>1</weight>
				</term>
				<term>
					<string>l_hv + a_hv * agb_1_cal_1km_db + n_hv * cos_local_db + neg_sigma0_hv_db</string>
					<weight>1</weight>
				</term>
				<term>
					<string>l_vv + a_vv * agb_1_cal_1km_db + n_vv * cos_local_db + neg_sigma0_vv_db</string>
					<weight>1</weight>
				</term>

				<term><!--  these terms are for absolute calibration with other, available higher-res data, e.g. in overlaps -->
					<string>l_hh + a_hh * agb_1_cal_db + n_hh * cos_local_db + neg_sigma0_hh_db</string>
					<weight>1</weight>
				</term>
				<term>
					<string>l_hv + a_hv * agb_1_cal_db + n_hv * cos_local_db + neg_sigma0_hv_db</string>
					<weight>1</weight>
				</term>
				<term>
					<string>l_vv + a_vv * agb_1_cal_db + n_vv * cos_local_db + neg_sigma0_vv_db</string>
					<weight>1</weight>
				</term>

				<term><!--  finally, these terms are for fitting to estimation data-->
					<string>l_hh + a_hh * agb_1_est_db + n_hh * cos_local_db + neg_sigma0_hh_db</string>
					<weight>1</weight>
				</term>
				<term>
					<string>l_hv + a_hv * agb_1_est_db + n_hv * cos_local_db + neg_sigma0_hv_db</string>
					<weight>1</weight>
				</term>
				<term>
					<string>l_vv + a_vv * agb_1_est_db + n_vv * cos_local_db + neg_sigma0_vv_db</string>
					<weight>1</weight>
				</term>


			</formula_terms>
			<formula_parameters>
				<par>
					<name>l_hh</name><!-- "l" = agb model scaling-->
					<save_as_map>False</save_as_map>
					<transform>none</transform><!-- inverse of this transform is applied to the final estimates prior to saving-->
					<limits unit="dB"><!-- these are the limits after transformation -->
						<min>-60</min>
						<max>0</max>
					</limits>
					<associated_observable_name>none</associated_observable_name>
					<changes_across_samples>False</changes_across_samples>
					<changes_across_forest_classes>False</changes_across_forest_classes>
					<changes_across_stacks>False</changes_across_stacks>
					<changes_across_global_cycles>False</changes_across_global_cycles>
					<changes_across_headings>False</changes_across_headings>
					<changes_across_swaths>False</changes_across_swaths>
					<changes_across_subswaths>False</changes_across_subswaths>
					<changes_across_azimuth_images>False</changes_across_azimuth_images>
				</par>
				<par>
					<name>l_hv</name>
					<save_as_map>False</save_as_map>
					<transform>none</transform><!-- inverse of this transform is applied to the final estimates prior to saving-->
					<limits unit="dB"><!-- these are the limits after transformation -->
						<min>-60</min>
						<max>0</max>
					</limits>
					<associated_observable_name>none</associated_observable_name>
					<changes_across_samples>False</changes_across_samples>
					<changes_across_forest_classes>False</changes_across_forest_classes>
					<changes_across_stacks>False</changes_across_stacks>
					<changes_across_global_cycles>False</changes_across_global_cycles>
					<changes_across_headings>False</changes_across_headings>
					<changes_across_swaths>False</changes_across_swaths>
					<changes_across_subswaths>False</changes_across_subswaths>
					<changes_across_azimuth_images>False</changes_across_azimuth_images>
				</par>
				<par>
					<name>l_vv</name>
					<save_as_map>False</save_as_map>
					<transform>none</transform><!-- inverse of this transform is applied to the final estimates prior to saving-->
					<limits unit="dB"><!-- these are the limits after transformation -->
						<min>-60</min>
						<max>0</max>
					</limits>
					<associated_observable_name>none</associated_observable_name>
					<changes_across_samples>False</changes_across_samples>
					<changes_across_forest_classes>False</changes_across_forest_classes>
					<changes_across_stacks>False</changes_across_stacks>
					<changes_across_global_cycles>False</changes_across_global_cycles>
					<changes_across_headings>False</changes_across_headings>
					<changes_across_swaths>False</changes_across_swaths>
					<changes_across_subswaths>False</changes_across_subswaths>
					<changes_across_azimuth_images>False</changes_across_azimuth_images>
				</par>
				<par>
					<name>a_hh</name><!-- "a" = agb model exponent-->
					<save_as_map>False</save_as_map>
					<transform>none</transform><!-- inverse of this transform is applied to the final estimates prior to saving-->
					<limits unit="none"><!-- these are the limits after transformation -->
						<min>0.1</min>
						<max>1.9</max>
					</limits>
					<associated_observable_name>none</associated_observable_name>
					<changes_across_samples>False</changes_across_samples>
					<changes_across_forest_classes>False</changes_across_forest_classes>
					<changes_across_stacks>False</changes_across_stacks>
					<changes_across_global_cycles>False</changes_across_global_cycles>
					<changes_across_headings>False</changes_across_headings>
					<changes_across_swaths>False</changes_across_swaths>
					<changes_across_subswaths>False</changes_across_subswaths>
					<changes_across_azimuth_images>False</changes_across_azimuth_images>
				</par>
				<par>
					<name>a_hv</name>
					<save_as_map>False</save_as_map>
					<transform>none</transform><!-- inverse of this transform is applied to the final estimates prior to saving-->
					<limits unit="none"><!-- these are the limits after transformation -->
						<min>0.1</min>
						<max>1.9</max>
					</limits>
					<associated_observable_name>none</associated_observable_name>
					<changes_across_samples>False</changes_across_samples>
					<changes_across_forest_classes>False</changes_across_forest_classes>
					<changes_across_stacks>False</changes_across_stacks>
					<changes_across_global_cycles>False</changes_across_global_cycles>
					<changes_across_headings>False</changes_across_headings>
					<changes_across_swaths>False</changes_across_swaths>
					<changes_across_subswaths>False</changes_across_subswaths>
					<changes_across_azimuth_images>False</changes_across_azimuth_images>
				</par>
				<par>
					<name>a_vv</name>
					<save_as_map>False</save_as_map>
					<transform>none</transform><!-- inverse of this transform is applied to the final estimates prior to saving-->
					<limits unit="none"><!-- these are the limits after transformation -->
						<min>0.1</min>
						<max>1.9</max>
					</limits>
					<associated_observable_name>none</associated_observable_name>
					<changes_across_samples>False</changes_across_samples>
					<changes_across_forest_classes>False</changes_across_forest_classes>
					<changes_across_stacks>False</changes_across_stacks>
					<changes_across_global_cycles>False</changes_across_global_cycles>
					<changes_across_headings>False</changes_across_headings>
					<changes_across_swaths>False</changes_across_swaths>
					<changes_across_subswaths>False</changes_across_subswaths>
					<changes_across_azimuth_images>False</changes_across_azimuth_images>
				</par>
				<par>
					<name>n_hh</name><!-- "n" = agb cosine exponent-->
					<save_as_map>False</save_as_map>
					<transform>none</transform><!-- inverse of this transform is applied to the final estimates prior to saving-->
					<limits unit="none"><!-- these are the limits after transformation -->
						<min>0</min>
						<max>3</max>
					</limits>
					<associated_observable_name>none</associated_observable_name>
					<changes_across_samples>False</changes_across_samples>
					<changes_across_forest_classes>False</changes_across_forest_classes>
					<changes_across_stacks>False</changes_across_stacks>
					<changes_across_global_cycles>False</changes_across_global_cycles>
					<changes_across_headings>False</changes_across_headings>
					<changes_across_swaths>False</changes_across_swaths>
					<changes_across_subswaths>False</changes_across_subswaths>
					<changes_across_azimuth_images>False</changes_across_azimuth_images>
				</par>
				<par>
					<name>n_hv</name>
					<save_as_map>False</save_as_map>
					<transform>none</transform><!-- inverse of this transform is applied to the final estimates prior to saving-->
					<limits unit="none"><!-- these are the limits after transformation -->
						<min>0</min>
						<max>3</max>
					</limits>
					<associated_observable_name>none</associated_observable_name>
					<changes_across_samples>False</changes_across_samples>
					<changes_across_forest_classes>False</changes_across_forest_classes>
					<changes_across_stacks>False</changes_across_stacks>
					<changes_across_global_cycles>False</changes_across_global_cycles>
					<changes_across_headings>False</changes_across_headings>
					<changes_across_swaths>False</changes_across_swaths>
					<changes_across_subswaths>False</changes_across_subswaths>
					<changes_across_azimuth_images>False</changes_across_azimuth_images>
				</par>
				<par>
					<name>n_vv</name>
					<save_as_map>False</save_as_map>
					<transform>none</transform><!-- inverse of this transform is applied to the final estimates prior to saving-->
					<limits unit="none"><!-- these are the limits after transformation -->
						<min>0</min>
						<max>3</max>
					</limits>
					<associated_observable_name>none</associated_observable_name>
					<changes_across_samples>False</changes_across_samples>
					<changes_across_forest_classes>False</changes_across_forest_classes>
					<changes_across_stacks>False</changes_across_stacks>
					<changes_across_global_cycles>False</changes_across_global_cycles>
					<changes_across_headings>False</changes_across_headings>
					<changes_across_swaths>False</changes_across_swaths>
					<changes_across_subswaths>False</changes_across_subswaths>
					<changes_across_azimuth_images>False</changes_across_azimuth_images>
				</par>
				<par>
					<name>agb_1_est_db</name><!-- AGB estimation -->
					<save_as_map>True</save_as_map>
					<transform>db</transform><!-- inverse of this transform is applied to the final estimates prior to saving-->
					<limits unit="t/ha"><!-- these are the limits after transformation -->
						<min>1</min>
						<max>700</max>
					</limits>
					<associated_observable_name>agb_1_cal_db</associated_observable_name>
					<changes_across_samples>True</changes_across_samples>
					<changes_across_forest_classes>False</changes_across_forest_classes>
					<changes_across_stacks>False</changes_across_stacks>
					<changes_across_global_cycles>False</changes_across_global_cycles>
					<changes_across_headings>False</changes_across_headings>
					<changes_across_swaths>False</changes_across_swaths>
					<changes_across_subswaths>False</changes_across_subswaths>
					<changes_across_azimuth_images>False</changes_across_azimuth_images>
				</par>
			</formula_parameters>
			<formula_observables><!-- <transform> tags: transformation to go from linear input (i.e. sigma0_hh) to formula_terms setting (i.e. "-db": neg_sigma0_hh_db = -10*log10(sigma0_hh) -->
				<obs>
					<name>forest_class</name>
					<is_required>True</is_required>
					<source_paths />
					<limits unit="none"><!-- these are the limits before transformation -->
						<min>0</min>
						<max>1000</max>
					</limits>
					<transform>none</transform>
					<averaging_method>mode</averaging_method>
				</obs>
				<obs>
					<name>neg_sigma0_hh_db</name>
					<is_required>True</is_required>
					<source_paths />
					<limits unit="none"><!-- these are the limits before transformation -->
						<min>1e-8</min>
						<max>20</max>
					</limits>
					<transform>-db</transform>
					<averaging_method>mean</averaging_method>
				</obs>
				<obs>
					<name>neg_sigma0_hv_db</name>
					<is_required>True</is_required>
					<source_paths />
					<limits unit="none"><!-- these are the limits before transformation -->
						<min>1e-8</min>
						<max>20</max>
					</limits>
					<transform>-2db</transform>
					<averaging_method>mean</averaging_method>
				</obs>
				<obs>
					<name>neg_sigma0_vv_db</name>
					<is_required>True</is_required>
					<source_paths />
					<limits unit="none"><!-- these are the limits before transformation -->
						<min>1e-8</min>
						<max>20</max>
					</limits>
					<transform>-db</transform>
					<averaging_method>mean</averaging_method>
				</obs>
				<obs>
					<name>cos_local_db</name>
					<is_required>True</is_required>
					<source_paths />
					<limits unit='Deg'><!-- these are the limits before transformation -->
						<min>20</min>
						<max>60</max>
					</limits>
					<transform>cosdb</transform>
					<averaging_method>mean</averaging_method>
				</obs>
				<obs>
					<name>agb_1_cal_db</name>
					<is_required>False</is_required>
					<source_paths />
					<limits unit='t/ha'><!-- these are the limits before transformation -->
						<min>1</min>
						<max>600</max>
					</limits>
					<transform>db</transform>
					<averaging_method>mean</averaging_method>
				</obs>
				<obs>
					<name>agb_1_cal_1km_db</name>
					<is_required>False</is_required>
					<source_paths />
					<limits unit='t/ha'><!-- these are the limits before transformation -->
						<min>1</min>
						<max>600</max>
					</limits>
					<transform>db</transform>
					<averaging_method>mean</averaging_method>
				</obs>

			</formula_observables>
		</residual_function>
		<number_of_tests>5</number_of_tests>
		<fraction_of_roi_per_test>100</fraction_of_roi_per_test>
		<fraction_of_cal_per_test>100</fraction_of_cal_per_test>
		<add_variability_on_cal_data >False</add_variability_on_cal_data >
		<intermediate_ground_averaging>100</intermediate_ground_averaging> <!-- intermediate_ground_averaging<=product_resolution/2 >-->
		<product_resolution unit="m">200</product_resolution><!--(roi) sampling area size-->
		<distance_sampling_area unit="m">300</distance_sampling_area><!--distance roi-->
		<parameter_block_size unit="m">7500</parameter_block_size>
		<distance_parameter_block unit="m">5250</distance_parameter_block>
		<min_number_of_rois>2</min_number_of_rois>
		<min_number_of_rois_per_stack>0</min_number_of_rois_per_stack>
		<min_number_of_cals_per_test>2</min_number_of_cals_per_test>
		<min_number_of_rois_per_test>1</min_number_of_rois_per_test>
		<EstimationValidValuesLimits><!-- necessary? -->
			<min unit="t/ha">1</min>
			<max unit="t/ha">1000</max>
		</EstimationValidValuesLimits>
	</EstimateAGB>
</ConfigurationL2CoreProcessingAGB>
